---
title: "Get started"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{get-started}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(sequins)
```

<!-- WARNING - This vignette is generated by {fusen} from dev/flat_full.Rmd: do not edit by hand -->

<!-- Run this 'development' chunk -->

<!-- Store every call to library() that you need to explore your functions -->


# graph_query: describe query as a graph

## graph_query example

```{r examples-graph_query}
query=spq_init() %>%
  spq_add("?mayor wdt:P31 ?species") %>%
  spq_set(species = c('wd:Q144','wd:Q146', 'wd:Q780')) %>%
  spq_add("?mayor p:P39 ?node") %>%
  spq_add("?node ps:P39 wd:Q30185") %>%
  spq_add("?node pq:P642 ?place") 

graph_query(query,labelling=TRUE)
```

# plot_query: plot query as a graph

# plot_query_step

    

  

```{r example-plot_query_step}
query=spq_init() %>%
  spq_add("?mayor wdt:P31 ?species") %>%
  spq_set(species = c('wd:Q144','wd:Q146', 'wd:Q780')) %>%
  spq_add("?mayor p:P39 ?node") %>%
  spq_add("?node ps:P39 wd:Q30185") %>%
  spq_add("?node pq:P642 ?place") 

gq=graph_query(query,labelling=TRUE)
plot_query_step(gq$graph,plotstep=3)
```

  

  


## example animal mayors

```{r example-plot_query}
query=spq_init() %>%
  spq_add("?mayor wdt:P31 ?species") %>%
  spq_set(species = c('wd:Q144','wd:Q146', 'wd:Q780')) %>%
  spq_add("?mayor p:P39 ?node") %>%
  spq_add("?node ps:P39 wd:Q30185") %>%
  spq_add("?node pq:P642 ?place") 

plot_query(query)
```

## example hal

```{r hal_example, fig.height = 8}
query=spq_init(endpoint="hal") %>%
  spq_add("?doc dcterms:creator ?createur") %>%  
  spq_add("?createur hal:structure ?affil") %>%     
  spq_add("?createur hal:person ?personne") %>%        
  spq_add("?personne foaf:name 'Lise Vaudor'") %>% 
  spq_add("?doc dcterms:type ?type") %>% 
  spq_label(affil,.languages=NULL) %>% 
  spq_label(type,.languages="fr") %>% 
  spq_add("?doc dcterms:bibliographicCitation ?citation") %>% # récupère la citation
  spq_add("?doc dcterms:issued ?date") %>% 
  spq_select(doc,date,citation,type_label)

plot_query(query, layout="tree",flip=TRUE, set_labels=c("hal:structure"="id de labo"), show_step=TRUE)
```

# get_label_1

    

  

```{r example-get_label_1}
get_label_1("wdt:P31")
get_label_1("{wd:Q144 wd:Q146 wd:Q780}")
get_label_1("wdt:P31/wdt:P279*")
```

  

  

# get_label

```{r example-get_label}
get_label("wd:Q152088",language="en")
get_label("wd:Q152088",language="fr")
get_label(c("wdt:P31","wdt:P625","'David Bowie'","?item"), language="fr")
get_label("hal:structure",endpoint="hal")
```

# replace_label

```{r example-replace_label}
sequins:::replace_label("hal:structure",c("hal:structure"="id de labo"))
sequins:::replace_label(c("tuttut","pouetpouet","ouiiiink"),
                        c("tuttut"="klaxon","pouetpouet"="corne de brume"))
```

# print_values

    

  

  

```{r examples-print_values}
sequins:::print_values("wdt:P31/wdt:P279*")
sequins:::print_values("{wd:Q144 wd:Q146 wd:Q780}")
```

